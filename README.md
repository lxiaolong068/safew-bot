# SafeW Bot

ä¸€ä¸ªåŸºäº Go è¯­è¨€å¼€å‘çš„ SafeW Botï¼Œæ”¯æŒæ¶ˆæ¯è½¬å‘å’Œç¾¤ç»„ç®¡ç†åŠŸèƒ½ã€‚

## âš¡ å¿«é€Ÿå¼€å§‹

### 3åˆ†é’Ÿéƒ¨ç½²åˆ°æœåŠ¡å™¨

```bash
# 1. æœ¬åœ°ç¼–è¯‘ (1åˆ†é’Ÿ)
git clone <repository-url> && cd safew-bot
./build.sh

# 2. ä¸€é”®éƒ¨ç½² (1åˆ†é’Ÿ)
./upload.sh æœåŠ¡å™¨IP root

# 3. é…ç½®å¯åŠ¨ (1åˆ†é’Ÿ)
ssh root@æœåŠ¡å™¨IP
cd /www/wwwroot/safew-bot
cp .env.example .env
# ç¼–è¾‘ .env æ·»åŠ  BOT_TOKEN å’Œ ADMIN_USERS
./start.sh
```

**æ›´å¤šæ–¹å¼**ï¼š
- ğŸ”§ **ä½¿ç”¨Makefile**: `make deploy SERVER=æœåŠ¡å™¨IP USER=root`
- ğŸ“– **è¯¦ç»†æŒ‡å—**: å‚è§ä¸‹æ–¹[æœ¬åœ°ç¼–è¯‘éƒ¨ç½²](#ğŸ—ï¸-æœ¬åœ°ç¼–è¯‘éƒ¨ç½²æ¨è)ç« èŠ‚
- ğŸ  **å®å¡”é¢æ¿**: å‚è§[å®å¡”é¢æ¿éƒ¨ç½²](#ğŸ -å®å¡”é¢æ¿éƒ¨ç½²)ç« èŠ‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### ğŸ“¤ æ¶ˆæ¯è½¬å‘
- æ”¯æŒè½¬å‘æ–‡æœ¬ã€å›¾ç‰‡ã€è§†é¢‘ã€æ–‡æ¡£ç­‰å¤šç§ç±»å‹çš„æ¶ˆæ¯
- é€šè¿‡å›å¤æ¶ˆæ¯ä½¿ç”¨ `/forward` å‘½ä»¤è¿›è¡Œè½¬å‘
- æ”¯æŒæŒ‡å®šç›®æ ‡ç¾¤ç»„è¿›è¡Œç²¾å‡†è½¬å‘

### ğŸ‘®â€â™‚ï¸ ç¾¤ç»„ç®¡ç†
- æŸ¥çœ‹ç¾¤ç»„ä¿¡æ¯å’Œç®¡ç†å‘˜åˆ—è¡¨
- ç¦è¨€è¿è§„ç”¨æˆ·
- æå‡ç”¨æˆ·ä¸ºç®¡ç†å‘˜
- æƒé™éªŒè¯ç¡®ä¿å®‰å…¨æ€§

### ğŸ”§ åŸºç¡€åŠŸèƒ½
- å‹å¥½çš„å‘½ä»¤å¸®åŠ©ç³»ç»Ÿ
- ä¼˜é›…çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•
- æ”¯æŒç¯å¢ƒå˜é‡é…ç½®
- ä¼˜é›…å…³é—­æœºåˆ¶

## ğŸ“‹ ç¯å¢ƒè¦æ±‚

### æœ¬åœ°å¼€å‘ç¯å¢ƒ
- Go 1.21 æˆ–æ›´é«˜ç‰ˆæœ¬
- Git
- SSHå®¢æˆ·ç«¯ï¼ˆç”¨äºéƒ¨ç½²ï¼‰

### æœåŠ¡å™¨ç¯å¢ƒ
- LinuxæœåŠ¡å™¨ï¼ˆæ”¯æŒæœ¬åœ°ç¼–è¯‘éƒ¨ç½²ï¼Œæ— éœ€Goç¯å¢ƒï¼‰
- SSHè®¿é—®æƒé™
- SafeW Bot Token

### å¯é€‰ç¯å¢ƒ
- å®å¡”é¢æ¿ï¼ˆç®€åŒ–æœåŠ¡å™¨ç®¡ç†ï¼‰
- rsyncï¼ˆç”¨äºæ–‡ä»¶åŒæ­¥ï¼‰

## ğŸ› ï¸ å®‰è£…é…ç½®

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd safew-bot
```

### 2. è·å– Bot Token
1. åœ¨ SafeW ä¸­è”ç³» @BotFather
2. ä½¿ç”¨ `/newbot` å‘½ä»¤åˆ›å»ºæ–°çš„ Bot
3. è·å– Tokenï¼ˆæ ¼å¼å¦‚ï¼š`4839574812:AAFD39kkdpWt3ywyRZergyOLMaJhac60qc`ï¼‰

### 3. é…ç½®ç¯å¢ƒå˜é‡

é¡¹ç›®æ”¯æŒä¸¤ç§é…ç½®æ–¹å¼ï¼š

#### æ–¹å¼1: ä½¿ç”¨ .env æ–‡ä»¶ï¼ˆæ¨èï¼‰
```bash
# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥æ‚¨çš„å®é™…é…ç½®
# è‡³å°‘éœ€è¦è®¾ç½® SAFEW_BOT_TOKEN
```

#### æ–¹å¼2: ç³»ç»Ÿç¯å¢ƒå˜é‡
```bash
export SAFEW_BOT_TOKEN="your_bot_token_here"
export FORWARD_TARGET_CHAT="é»˜è®¤è½¬å‘ç›®æ ‡ç¾¤ç»„IDï¼ˆå¯é€‰ï¼‰"
export LOG_LEVEL="INFO"  # DEBUG, INFO, WARN, ERROR
export POLL_TIMEOUT="30"  # é•¿è½®è¯¢è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
```

> **æ³¨æ„**: .env æ–‡ä»¶çš„ä¼˜å…ˆçº§é«˜äºç³»ç»Ÿç¯å¢ƒå˜é‡

### 4. ç¼–è¯‘è¿è¡Œ

#### ğŸ—ï¸ æœ¬åœ°ç¼–è¯‘éƒ¨ç½²ï¼ˆæ¨èï¼‰

æœ¬é¡¹ç›®æ”¯æŒæœ¬åœ°ç¼–è¯‘åä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæ— éœ€åœ¨æœåŠ¡å™¨å®‰è£…Goç¯å¢ƒï¼Œéƒ¨ç½²æ›´é«˜æ•ˆã€‚

**æ­¥éª¤1: æœ¬åœ°ç¼–è¯‘**
```bash
# ä½¿ç”¨æ„å»ºè„šæœ¬ï¼ˆæ¨èï¼‰
chmod +x build.sh upload.sh
./build.sh

# æˆ–ä½¿ç”¨ Makefile
make build

# æˆ–æ‰‹åŠ¨äº¤å‰ç¼–è¯‘
GOOS=linux GOARCH=amd64 go build -ldflags="-w -s" -o build/safew-bot .
```

ç¼–è¯‘å®Œæˆåï¼Œ`build` ç›®å½•åŒ…å«ï¼š
- `safew-bot` - Linuxå¯æ‰§è¡Œæ–‡ä»¶
- `.env.example` - é…ç½®æ¨¡æ¿
- `start.sh` / `stop.sh` - å¯åŠ¨/åœæ­¢è„šæœ¬
- `deploy/` - éƒ¨ç½²ç›¸å…³è„šæœ¬

**æ­¥éª¤2: ä¸Šä¼ åˆ°æœåŠ¡å™¨**
```bash
# ä½¿ç”¨ä¸Šä¼ è„šæœ¬ï¼ˆæ¨èï¼‰
./upload.sh æœåŠ¡å™¨IP ç”¨æˆ·å [ç›®æ ‡ç›®å½•]

# ç¤ºä¾‹
./upload.sh 192.168.1.100 root
./upload.sh example.com root /opt/safew-bot

# æˆ–ä½¿ç”¨ Makefile ä¸€é”®éƒ¨ç½²
make deploy SERVER=192.168.1.100 USER=root
make deploy SERVER=example.com USER=root DIR=/opt/safew-bot
```

**æ­¥éª¤3: æœåŠ¡å™¨å¯åŠ¨**
```bash
# SSHè¿æ¥åˆ°æœåŠ¡å™¨
ssh root@your-server

# è¿›å…¥ç›®å½•
cd /www/wwwroot/safew-bot

# é…ç½®ç¯å¢ƒï¼ˆé¦–æ¬¡éƒ¨ç½²ï¼‰
cp .env.example .env
vi .env  # ä¿®æ”¹é…ç½®

# å¯åŠ¨æœåŠ¡
./start.sh

# åœæ­¢æœåŠ¡
./stop.sh
```

#### ğŸ“¦ æ„å»ºå‘½ä»¤å‚è€ƒ

```bash
# æ˜¾ç¤ºå¸®åŠ©
make help

# ç¼–è¯‘ç›¸å…³
make build          # äº¤å‰ç¼–è¯‘Linuxç‰ˆæœ¬
make build-local    # æœ¬åœ°ç¼–è¯‘
make clean          # æ¸…ç†ç¼–è¯‘æ–‡ä»¶

# æµ‹è¯•å’Œæ£€æŸ¥
make test           # è¿è¡Œæµ‹è¯•
make fmt            # æ ¼å¼åŒ–ä»£ç 
make vet            # ä»£ç æ£€æŸ¥
make check          # å®Œæ•´æ£€æŸ¥

# éƒ¨ç½²ç›¸å…³
make upload SERVER=ip USER=user    # ä¸Šä¼ åˆ°æœåŠ¡å™¨
make deploy SERVER=ip USER=user    # ç¼–è¯‘+ä¸Šä¼ 

# ä¾èµ–ç®¡ç†
make deps           # å®‰è£…ä¾èµ–
make update         # æ›´æ–°ä¾èµ–

# ç‰ˆæœ¬ä¿¡æ¯
make version        # æ˜¾ç¤ºæ„å»ºç‰ˆæœ¬
./safew-bot -v      # æ˜¾ç¤ºç¨‹åºç‰ˆæœ¬
```

#### ğŸ–¥ï¸ æœ¬åœ°å¼€å‘è¿è¡Œ

```bash
# æœ¬åœ°ç¼–è¯‘
go build -o safew-bot

# æœ¬åœ°è¿è¡Œ
./safew-bot

# æˆ–ç›´æ¥è¿è¡Œ
go run .

# æˆ–ä½¿ç”¨ make
make run
```

## ğŸ“– å‘½ä»¤åˆ—è¡¨

### ğŸ”§ åŸºç¡€å‘½ä»¤
- `/start` - å¼€å§‹ä½¿ç”¨Botï¼Œæ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯
- `/help` - æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤å’Œä½¿ç”¨è¯´æ˜
- `/info` - è·å–å½“å‰ç¾¤ç»„çš„è¯¦ç»†ä¿¡æ¯

### ğŸ“¤ è½¬å‘åŠŸèƒ½
- `/forward <ç›®æ ‡ç¾¤ID>` - è½¬å‘å›å¤çš„æ¶ˆæ¯åˆ°æŒ‡å®šç¾¤ç»„
  - ä½¿ç”¨æ–¹æ³•ï¼šå›å¤è¦è½¬å‘çš„æ¶ˆæ¯ï¼Œç„¶åè¾“å…¥å‘½ä»¤
  - ç¤ºä¾‹ï¼š`/forward -1001234567890`

### ğŸ‘®â€â™‚ï¸ ç®¡ç†å‘½ä»¤ï¼ˆä»…ç®¡ç†å‘˜ï¼‰
- `/ban <@ç”¨æˆ·å> [åŸå› ]` - ç¦è¨€æŒ‡å®šç”¨æˆ·
- `/promote <@ç”¨æˆ·å>` - æå‡ç”¨æˆ·ä¸ºç®¡ç†å‘˜
- `/admins` - æŸ¥çœ‹ç¾¤ç»„ç®¡ç†å‘˜åˆ—è¡¨

## ğŸ”’ æƒé™è¯´æ˜

- **æ™®é€šç”¨æˆ·**ï¼šå¯ä»¥ä½¿ç”¨åŸºç¡€å‘½ä»¤å’Œè½¬å‘åŠŸèƒ½
- **ç¾¤ç»„ç®¡ç†å‘˜**ï¼šå¯ä»¥ä½¿ç”¨æ‰€æœ‰ç¾¤ç»„ç®¡ç†å‘½ä»¤
- **Bot æƒé™**ï¼šéœ€è¦åœ¨ç¾¤ç»„ä¸­ç»™äºˆ Bot ä»¥ä¸‹æƒé™ï¼š
  - è¯»å–æ¶ˆæ¯
  - å‘é€æ¶ˆæ¯
  - åˆ é™¤æ¶ˆæ¯
  - ç®¡ç†èŠå¤©ï¼ˆç”¨äºç®¡ç†åŠŸèƒ½ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
safew-bot/
â”œâ”€â”€ go.mod                  # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ go.sum                  # Go ä¾èµ–æ ¡éªŒæ–‡ä»¶
â”œâ”€â”€ main.go                 # ç¨‹åºå…¥å£
â”œâ”€â”€ config.go               # é…ç½®ç®¡ç†
â”œâ”€â”€ .env.example            # ç¯å¢ƒå˜é‡é…ç½®ç¤ºä¾‹
â”œâ”€â”€ .env                    # ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ (éœ€æ‰‹åŠ¨åˆ›å»º)
â”œâ”€â”€ .gitignore              # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ build.sh                # æœ¬åœ°ç¼–è¯‘è„šæœ¬
â”œâ”€â”€ upload.sh               # è‡ªåŠ¨ä¸Šä¼ éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ Makefile                # æ„å»ºå·¥å…·å’Œä»»åŠ¡ç®¡ç†
â”œâ”€â”€ bot/                    # Bot æ ¸å¿ƒåŒ…
â”‚   â”œâ”€â”€ models.go           # API æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ api.go              # API å®¢æˆ·ç«¯
â”‚   â”œâ”€â”€ bot.go              # Bot ä¸»å¾ªç¯
â”‚   â””â”€â”€ handlers.go         # æ¶ˆæ¯å¤„ç†å™¨
â”œâ”€â”€ docs/                   # æ–‡æ¡£ç›®å½•
â”‚   â””â”€â”€ development-plan.md # å¼€å‘è®¡åˆ’
â”œâ”€â”€ deploy/                 # éƒ¨ç½²è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ README.md           # éƒ¨ç½²è„šæœ¬è¯´æ˜æ–‡æ¡£
â”‚   â”œâ”€â”€ bt-deploy.sh        # å®å¡”ç¯å¢ƒä¸€é”®éƒ¨ç½²è„šæœ¬
â”‚   â””â”€â”€ bt-update.sh        # å®å¡”ç¯å¢ƒå¿«é€Ÿæ›´æ–°è„šæœ¬
â”œâ”€â”€ build/                  # ç¼–è¯‘è¾“å‡ºç›®å½• (gitignore)
â”‚   â”œâ”€â”€ safew-bot           # Linuxå¯æ‰§è¡Œæ–‡ä»¶
â”‚   â”œâ”€â”€ .env.example        # é…ç½®æ¨¡æ¿
â”‚   â”œâ”€â”€ start.sh            # å¯åŠ¨è„šæœ¬
â”‚   â”œâ”€â”€ stop.sh             # åœæ­¢è„šæœ¬
â”‚   â””â”€â”€ deploy/             # éƒ¨ç½²è„šæœ¬å‰¯æœ¬
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## ğŸš¦ ä½¿ç”¨ç¤ºä¾‹

### å¯åŠ¨Bot
```bash
# æ–¹å¼1: ä½¿ç”¨ .env æ–‡ä»¶
# ç¡®ä¿ .env æ–‡ä»¶ä¸­å·²è®¾ç½®æ­£ç¡®çš„ SAFEW_BOT_TOKEN
go run .

# æ–¹å¼2: ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡
export SAFEW_BOT_TOKEN="4839574812:AAFD39kkdpWt3ywyRZergyOLMaJhac60qc"
go run .
```

### è½¬å‘æ¶ˆæ¯
1. åœ¨ç¾¤ç»„ä¸­å›å¤è¦è½¬å‘çš„æ¶ˆæ¯
2. è¾“å…¥ï¼š`/forward -1001234567890`
3. Bot ä¼šå°†å›å¤çš„æ¶ˆæ¯è½¬å‘åˆ°æŒ‡å®šç¾¤ç»„

### ç®¡ç†ç¾¤ç»„
```
/info                    # æŸ¥çœ‹ç¾¤ç»„ä¿¡æ¯
/admins                  # æŸ¥çœ‹ç®¡ç†å‘˜åˆ—è¡¨
/ban @username è¿åç¾¤è§„   # ç¦è¨€ç”¨æˆ·
/promote @username       # æå‡ç®¡ç†å‘˜
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **Token å®‰å…¨**ï¼š
   - ç»ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç  Token
   - ä½¿ç”¨ .env æ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡è¿›è¡Œé…ç½®
   - .env æ–‡ä»¶å·²æ·»åŠ åˆ° .gitignoreï¼Œä¸ä¼šè¢«æäº¤åˆ°ç‰ˆæœ¬æ§åˆ¶
   - å®šæœŸæ›´æ¢ Token

2. **æƒé™ç®¡ç†**ï¼š
   - ç®¡ç†å‘½ä»¤ä¼šéªŒè¯ç”¨æˆ·æƒé™
   - Bot éœ€è¦ç›¸åº”çš„ç¾¤ç»„æƒé™æ‰èƒ½æ‰§è¡Œæ“ä½œ

3. **é”™è¯¯å¤„ç†**ï¼š
   - Bot ä¼šè‡ªåŠ¨é‡è¯•å¤±è´¥çš„è¯·æ±‚
   - ç½‘ç»œé”™è¯¯ä¼šè®°å½•æ—¥å¿—å¹¶ç»§ç»­è¿è¡Œ

4. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - ä½¿ç”¨é•¿è½®è¯¢å‡å°‘ä¸å¿…è¦çš„è¯·æ±‚
   - åˆç†è®¾ç½®è¶…æ—¶æ—¶é—´

## ğŸš€ ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²

### Linux æœåŠ¡å™¨éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### 1. æœåŠ¡å™¨ç¯å¢ƒå‡†å¤‡
```bash
# æ›´æ–°ç³»ç»ŸåŒ…
sudo apt update && sudo apt upgrade -y  # Ubuntu/Debian
# æˆ–
sudo yum update -y  # CentOS/RHEL

# å®‰è£… Go ç¯å¢ƒ (å¦‚æœæœªå®‰è£…)
wget https://golang.org/dl/go1.21.0.linux-amd64.tar.gz
sudo tar -C /usr/local -xzf go1.21.0.linux-amd64.tar.gz
echo 'export PATH=$PATH:/usr/local/go/bin' >> ~/.bashrc
source ~/.bashrc
```

#### 2. é¡¹ç›®éƒ¨ç½²
```bash
# åˆ›å»ºåº”ç”¨ç›®å½•
sudo mkdir -p /opt/safew-bot
cd /opt/safew-bot

# ä¸Šä¼ é¡¹ç›®æ–‡ä»¶æˆ–å…‹éš†ä»£ç 
git clone <your-repository-url> .
# æˆ–ä¸Šä¼ é¡¹ç›®æ–‡ä»¶åˆ°æ­¤ç›®å½•

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
nano .env  # ç¼–è¾‘é…ç½®æ–‡ä»¶

# ç¼–è¯‘ç”Ÿäº§ç‰ˆæœ¬
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-w -s" -o safew-bot

# è®¾ç½®å¯æ‰§è¡Œæƒé™
chmod +x safew-bot

# åˆ›å»ºä¸“ç”¨ç”¨æˆ·ï¼ˆå®‰å…¨è€ƒè™‘ï¼‰
sudo useradd -r -s /bin/false safew
sudo chown -R safew:safew /opt/safew-bot
```

#### 3. ç³»ç»ŸæœåŠ¡é…ç½®
```bash
# åˆ›å»º systemd æœåŠ¡æ–‡ä»¶
sudo nano /etc/systemd/system/safew-bot.service
```

æœåŠ¡æ–‡ä»¶å†…å®¹ï¼š
```ini
[Unit]
Description=SafeW Bot Service
After=network.target
Wants=network.target

[Service]
Type=simple
User=safew
Group=safew
WorkingDirectory=/opt/safew-bot
ExecStart=/opt/safew-bot/safew-bot
Restart=always
RestartSec=5
StandardOutput=journal
StandardError=journal
SyslogIdentifier=safew-bot

# ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼Œå¦‚æœä¸ä½¿ç”¨ .env æ–‡ä»¶ï¼‰
# Environment=SAFEW_BOT_TOKEN=your_token_here
# Environment=LOG_LEVEL=INFO

[Install]
WantedBy=multi-user.target
```

```bash
# é‡è½½ systemd é…ç½®
sudo systemctl daemon-reload

# å¯ç”¨æœåŠ¡ï¼ˆå¼€æœºè‡ªå¯ï¼‰
sudo systemctl enable safew-bot

# å¯åŠ¨æœåŠ¡
sudo systemctl start safew-bot

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
sudo systemctl status safew-bot
```

### ğŸ  å®å¡”é¢æ¿éƒ¨ç½²

#### ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

æˆ‘ä»¬æä¾›äº†è‡ªåŠ¨åŒ–éƒ¨ç½²è„šæœ¬ï¼Œç®€åŒ–å®å¡”ç¯å¢ƒçš„éƒ¨ç½²è¿‡ç¨‹ï¼š

```bash
# ä¸‹è½½éƒ¨ç½²è„šæœ¬
wget https://raw.githubusercontent.com/your-repo/safew-bot/main/deploy/bt-deploy.sh
# æˆ–ä½¿ç”¨ curl
curl -O https://raw.githubusercontent.com/your-repo/safew-bot/main/deploy/bt-deploy.sh

# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x bt-deploy.sh

# æ‰§è¡Œéƒ¨ç½²
./bt-deploy.sh
```

**è„šæœ¬åŠŸèƒ½**ï¼š
- âœ… è‡ªåŠ¨æ£€æµ‹å®å¡”ç¯å¢ƒå’ŒGoè¯­è¨€
- âœ… åˆ›å»ºé¡¹ç›®ç›®å½•å’Œç”¨æˆ·æƒé™
- âœ… ä¸‹è½½/æ›´æ–°é¡¹ç›®ä»£ç 
- âœ… é…ç½®ç¯å¢ƒå˜é‡æ–‡ä»¶
- âœ… ç¼–è¯‘å’Œéƒ¨ç½²åº”ç”¨
- âœ… åˆ›å»ºç³»ç»ŸæœåŠ¡å’Œè‡ªå¯åŠ¨
- âœ… å¯åŠ¨æœåŠ¡å¹¶æ£€æŸ¥çŠ¶æ€

**æ›´æ–°è„šæœ¬**ï¼š
```bash
# ä¸‹è½½æ›´æ–°è„šæœ¬
wget https://raw.githubusercontent.com/your-repo/safew-bot/main/deploy/bt-update.sh
chmod +x bt-update.sh

# æ‰§è¡Œæ›´æ–°
./bt-update.sh
```

#### æ‰‹åŠ¨éƒ¨ç½²æ–¹å¼

#### 1. ç¯å¢ƒå‡†å¤‡
1. **å®‰è£… Go ç¯å¢ƒ**ï¼š
   - åœ¨å®å¡”é¢æ¿ä¸­è¿›å…¥ "è½¯ä»¶å•†åº—"
   - æœç´¢å¹¶å®‰è£… "Go" è¿è¡Œç¯å¢ƒ
   - æˆ–æ‰‹åŠ¨å®‰è£…ï¼šè½¯ä»¶å•†åº— â†’ è¿è¡Œç¯å¢ƒ â†’ Go

2. **åˆ›å»ºç½‘ç«™ç›®å½•**ï¼š
   - ç½‘ç«™ â†’ æ·»åŠ ç«™ç‚¹ â†’ åˆ›å»ºç›®å½• `/www/wwwroot/safew-bot`
   - æˆ–ä½¿ç”¨å‘½ä»¤è¡Œï¼š`mkdir -p /www/wwwroot/safew-bot`

#### 2. ä¸Šä¼ å’Œé…ç½®
```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /www/wwwroot/safew-bot

# ä¸Šä¼ é¡¹ç›®æ–‡ä»¶ï¼ˆé€šè¿‡å®å¡”æ–‡ä»¶ç®¡ç†å™¨æˆ– Gitï¼‰
# æ–¹å¼1: ä½¿ç”¨ Git
git clone <your-repository-url> .

# æ–¹å¼2: é€šè¿‡å®å¡”é¢æ¿æ–‡ä»¶ç®¡ç†å™¨ä¸Šä¼ zipåŒ…å¹¶è§£å‹

# é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# é€šè¿‡å®å¡”é¢æ¿æ–‡ä»¶ç®¡ç†å™¨ç¼–è¾‘ .env æ–‡ä»¶
```

#### 3. ç¼–è¯‘å’Œè¿è¡Œ
```bash
# ç¼–è¯‘é¡¹ç›®
go build -o safew-bot

# è®¾ç½®æƒé™
chmod +x safew-bot
```

#### 4. å®å¡”è¿›ç¨‹ç®¡ç†
1. **å®‰è£…è¿›ç¨‹å®ˆæŠ¤å™¨**ï¼š
   - è½¯ä»¶å•†åº— â†’ ç³»ç»Ÿå·¥å…· â†’ å®‰è£… "è¿›ç¨‹å®ˆæŠ¤å™¨"

2. **æ·»åŠ è¿›ç¨‹**ï¼š
   - è¿›ç¨‹å®ˆæŠ¤å™¨ â†’ æ·»åŠ å®ˆæŠ¤è¿›ç¨‹
   - åç§°ï¼š`SafeW Bot`
   - å¯åŠ¨æ–‡ä»¶ï¼š`/www/wwwroot/safew-bot/safew-bot`
   - è¿è¡Œç›®å½•ï¼š`/www/wwwroot/safew-bot`
   - å¯åŠ¨å‚æ•°ï¼šç•™ç©º
   - è¿è¡Œç”¨æˆ·ï¼š`www`

3. **è¿›ç¨‹ç®¡ç†**ï¼š
   - å¯åŠ¨ï¼šç‚¹å‡» "å¯åŠ¨" æŒ‰é’®
   - åœæ­¢ï¼šç‚¹å‡» "åœæ­¢" æŒ‰é’®
   - é‡å¯ï¼šç‚¹å‡» "é‡å¯" æŒ‰é’®
   - æŸ¥çœ‹æ—¥å¿—ï¼šç‚¹å‡» "æ—¥å¿—" æŒ‰é’®

#### 5. å®å¡”å®šæ—¶ä»»åŠ¡ï¼ˆå¯é€‰ï¼‰
æ·»åŠ å®šæ—¶é‡å¯ä»»åŠ¡ï¼ˆå‡Œæ™¨é‡å¯ï¼Œæ¸…ç†å†…å­˜ï¼‰ï¼š
```bash
# è®¡åˆ’ä»»åŠ¡ â†’ æ·»åŠ ä»»åŠ¡
# ä»»åŠ¡ç±»å‹ï¼šShellè„šæœ¬
# ä»»åŠ¡åç§°ï¼šé‡å¯SafeW Bot
# æ‰§è¡Œå‘¨æœŸï¼šæ¯å¤© 03:00
# è„šæœ¬å†…å®¹ï¼š
systemctl restart safew-bot
# æˆ–è€…å¦‚æœä½¿ç”¨è¿›ç¨‹å®ˆæŠ¤å™¨ï¼š
# é€šè¿‡APIé‡å¯è¿›ç¨‹
```

### ğŸ“Š ç›‘æ§å’Œæ—¥å¿—

#### 1. æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
sudo journalctl -u safew-bot -f

# æŸ¥çœ‹æœ€è¿‘æ—¥å¿—
sudo journalctl -u safew-bot --since "1 hour ago"

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo journalctl -u safew-bot -p err
```

#### 2. å®å¡”æ—¥å¿—ç®¡ç†
- **å®æ—¶æ—¥å¿—**ï¼šè¿›ç¨‹å®ˆæŠ¤å™¨ â†’ ç‚¹å‡»å¯¹åº”è¿›ç¨‹çš„ "æ—¥å¿—" æŒ‰é’®
- **æ—¥å¿—æ–‡ä»¶**ï¼š`/www/wwwroot/safew-bot/` ç›®å½•ä¸‹çš„æ—¥å¿—æ–‡ä»¶
- **ç³»ç»Ÿæ—¥å¿—**ï¼šå®‰å…¨ â†’ ç³»ç»Ÿæ—¥å¿— â†’ ç­›é€‰ "safew-bot"

#### 3. æ€§èƒ½ç›‘æ§
```bash
# æŸ¥çœ‹è¿›ç¨‹çŠ¶æ€
ps aux | grep safew-bot

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
top -p $(pgrep safew-bot)

# æŸ¥çœ‹ç½‘ç»œè¿æ¥
netstat -tlnp | grep safew-bot
```

### ğŸ”„ æ›´æ–°ç»´æŠ¤

#### 1. æ›´æ–°ä»£ç 
```bash
cd /opt/safew-bot  # æˆ– /www/wwwroot/safew-bot

# åœæ­¢æœåŠ¡
sudo systemctl stop safew-bot

# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°ç¼–è¯‘
go build -o safew-bot

# å¯åŠ¨æœåŠ¡
sudo systemctl start safew-bot

# æ£€æŸ¥çŠ¶æ€
sudo systemctl status safew-bot
```

#### 2. å¤‡ä»½é…ç½®
```bash
# å¤‡ä»½é…ç½®æ–‡ä»¶
cp .env .env.backup.$(date +%Y%m%d)

# å¤‡ä»½æ•´ä¸ªé¡¹ç›®ï¼ˆå¯é€‰ï¼‰
tar -czf safew-bot-backup-$(date +%Y%m%d).tar.gz /opt/safew-bot
```

#### 3. æ•…éšœæ’é™¤
```bash
# æ£€æŸ¥é…ç½®æ–‡ä»¶
cat .env

# æ£€æŸ¥ç¼–è¯‘é”™è¯¯
go build -v -o safew-bot

# æ£€æŸ¥ç«¯å£å ç”¨
ss -tlnp | grep :443  # å¦‚æœä½¿ç”¨HTTPS

# æµ‹è¯•é…ç½®
./safew-bot --test-config  # éœ€è¦æ·»åŠ æ­¤åŠŸèƒ½
```

### ğŸ”’ å®‰å…¨é…ç½®

#### 1. é˜²ç«å¢™è®¾ç½®
```bash
# å¦‚æœBotéœ€è¦æ¥æ”¶Webhookï¼ˆå¯é€‰ï¼‰
sudo ufw allow 8443/tcp  # æˆ–æ‚¨è®¾ç½®çš„ç«¯å£

# å®å¡”é¢æ¿å®‰å…¨è®¾ç½®
# å®‰å…¨ â†’ é˜²ç«å¢™ â†’ æ·»åŠ è§„åˆ™
```

#### 2. SSLè¯ä¹¦ï¼ˆå¦‚æœä½¿ç”¨Webhookï¼‰
- å®å¡”é¢æ¿ â†’ SSL â†’ ç”³è¯·å…è´¹è¯ä¹¦
- æˆ–ä½¿ç”¨ Let's Encrypt

#### 3. è¿›ç¨‹æƒé™
```bash
# ç¡®ä¿Botä»¥érootç”¨æˆ·è¿è¡Œ
sudo chown -R safew:safew /opt/safew-bot
sudo chmod 644 .env  # é™åˆ¶é…ç½®æ–‡ä»¶æƒé™
```

## ğŸ”§ å¼€å‘ç›¸å…³

### ç¼–è¯‘ç”Ÿäº§ç‰ˆæœ¬
```bash
CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags="-w -s" -o safew-bot
```

### è¿è¡Œæµ‹è¯•
```bash
go test ./...
```

### ä»£ç æ ¼å¼åŒ–
```bash
go fmt ./...
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.1.0 (æœ€æ–°)
- âœ… æœ¬åœ°ç¼–è¯‘éƒ¨ç½²æ”¯æŒ
- âœ… è‡ªåŠ¨åŒ–æ„å»ºè„šæœ¬ (`build.sh`)
- âœ… ä¸€é”®ä¸Šä¼ éƒ¨ç½²è„šæœ¬ (`upload.sh`)
- âœ… Makefile æ„å»ºå·¥å…·æ”¯æŒ
- âœ… ç‰ˆæœ¬ä¿¡æ¯å’Œæ„å»ºæ—¶é—´æ˜¾ç¤º
- âœ… äº¤å‰ç¼–è¯‘Linuxç‰ˆæœ¬
- âœ… æœåŠ¡å™¨å¯åŠ¨/åœæ­¢è„šæœ¬
- âœ… å®Œå–„çš„éƒ¨ç½²æ–‡æ¡£

### v1.0.0
- âœ… åŸºç¡€æ¡†æ¶æ­å»º
- âœ… æ¶ˆæ¯è½¬å‘åŠŸèƒ½
- âœ… ç¾¤ç»„ç®¡ç†åŠŸèƒ½
- âœ… å‘½ä»¤å¤„ç†ç³»ç»Ÿ
- âœ… é…ç½®ç®¡ç†
- âœ… ä¼˜é›…å…³é—­
- âœ… å®å¡”é¢æ¿éƒ¨ç½²è„šæœ¬

## â“ å¸¸è§é—®é¢˜

### Q: æœ¬åœ°ç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
```bash
# æ£€æŸ¥Goç‰ˆæœ¬ (éœ€è¦1.21+)
go version

# é‡æ–°å®‰è£…ä¾èµ–
go mod tidy

# æ¸…ç†åé‡æ–°ç¼–è¯‘
make clean && make build
```

### Q: ä¸Šä¼ åˆ°æœåŠ¡å™¨å¤±è´¥ï¼Ÿ
```bash
# æ£€æŸ¥SSHè¿æ¥
ssh -v root@æœåŠ¡å™¨IP

# æ£€æŸ¥rsyncæ˜¯å¦å®‰è£…
which rsync

# ä½¿ç”¨è¯¦ç»†æ¨¡å¼æŸ¥çœ‹é”™è¯¯
./upload.sh æœåŠ¡å™¨IP root
```

### Q: Botä¸å“åº”æ¶ˆæ¯ï¼Ÿ
1. æ£€æŸ¥Tokenæ˜¯å¦æ­£ç¡®è®¾ç½®
2. ç¡®è®¤Botå·²æ·»åŠ åˆ°ç›®æ ‡ç¾¤ç»„
3. æ£€æŸ¥Botæ˜¯å¦æœ‰å‘é€æ¶ˆæ¯æƒé™
4. æŸ¥çœ‹è¿è¡Œæ—¥å¿—ï¼š`tail -f logs/safew-bot.log`

### Q: å¦‚ä½•æ›´æ–°Botåˆ°æ–°ç‰ˆæœ¬ï¼Ÿ
```bash
# æœ¬åœ°é‡æ–°ç¼–è¯‘
make clean && make build

# é‡æ–°éƒ¨ç½²
make deploy SERVER=æœåŠ¡å™¨IP USER=root

# æˆ–ä½¿ç”¨æ›´æ–°è„šæœ¬
ssh root@æœåŠ¡å™¨IP "cd /www/wwwroot/safew-bot && ./deploy/bt-update.sh"
```

### Q: å¦‚ä½•åœ¨å®å¡”é¢æ¿ä¸­ç®¡ç†ï¼Ÿ
1. å®‰è£…"è¿›ç¨‹å®ˆæŠ¤å™¨"æ’ä»¶
2. æ·»åŠ è¿›ç¨‹ï¼šå¯åŠ¨æ–‡ä»¶ `/www/wwwroot/safew-bot/safew-bot`
3. æˆ–ä½¿ç”¨ä¸€é”®éƒ¨ç½²è„šæœ¬ï¼š`./deploy/bt-deploy.sh`

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æº - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ“ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰åŠŸèƒ½å»ºè®®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹ç°æœ‰çš„ Issues
2. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜
3. æä¾›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œæ­¥éª¤

---

**æ³¨æ„**: æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„å’Œå¹³å°è§„åˆ™ã€‚ 